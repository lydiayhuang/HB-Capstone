{% extends 'base.html' %}
{% block content %}

    <h2>Garages</h2>

<!--     <iframe src="https://www.google.com/maps/embed?pb=!1m10!1m8!1m3!1d12611.974921443496!2d-122.40708325!3d37.7901867!3m2!1i1024!2i768!4f13.1!5e0!3m2!1sen!2sus!4v1491619231395" width="600" height="450" frameborder="0" style="border:0" allowfullscreen></iframe> -->
<div id="map" style="height: 800px;width=600px;"></div>

    <ul>
      {% for parking_location in garages %}
          <li>
              <a href="/garages/{{ parking_location.parking_id }}">
                {{ parking_location.address}} ({{ parking_location.parking_id }})
              </a>
          </li>
      {% endfor %}
    </ul>

<script>
  // var test = {{garages|safe}}
      function initMap() {
        // Styles a map in night mode.
        var map = new google.maps.Map(document.getElementById('map'), {
          center: {lat: 40.674, lng: -73.945},
          zoom: 12,
          styles: [
            {elementType: 'geometry', stylers: [{color: '#242f3e'}]},
            {elementType: 'labels.text.stroke', stylers: [{color: '#242f3e'}]},
            {elementType: 'labels.text.fill', stylers: [{color: '#746855'}]},
            {
              featureType: 'administrative.locality',
              elementType: 'labels.text.fill',
              stylers: [{color: '#d59563'}]
            },
            {
              featureType: 'poi',
              elementType: 'labels.text.fill',
              stylers: [{color: '#d59563'}]
            },
            {
              featureType: 'poi.park',
              elementType: 'geometry',
              stylers: [{color: '#263c3f'}]
            },
            {
              featureType: 'poi.park',
              elementType: 'labels.text.fill',
              stylers: [{color: '#6b9a76'}]
            },
            {
              featureType: 'road',
              elementType: 'geometry',
              stylers: [{color: '#38414e'}]
            },
            {
              featureType: 'road',
              elementType: 'geometry.stroke',
              stylers: [{color: '#212a37'}]
            },
            {
              featureType: 'road',
              elementType: 'labels.text.fill',
              stylers: [{color: '#9ca5b3'}]
            },
            {
              featureType: 'road.highway',
              elementType: 'geometry',
              stylers: [{color: '#746855'}]
            },
            {
              featureType: 'road.highway',
              elementType: 'geometry.stroke',
              stylers: [{color: '#1f2835'}]
            },
            {
              featureType: 'road.highway',
              elementType: 'labels.text.fill',
              stylers: [{color: '#f3d19c'}]
            },
            {
              featureType: 'transit',
              elementType: 'geometry',
              stylers: [{color: '#2f3948'}]
            },
            {
              featureType: 'transit.station',
              elementType: 'labels.text.fill',
              stylers: [{color: '#d59563'}]
            },
            {
              featureType: 'water',
              elementType: 'geometry',
              stylers: [{color: '#17263c'}]
            },
            {
              featureType: 'water',
              elementType: 'labels.text.fill',
              stylers: [{color: '#515c6d'}]
            },
            {
              featureType: 'water',
              elementType: 'labels.text.stroke',
              stylers: [{color: '#17263c'}]
            }
          ]
        });
      
      $.get("/map_data", function(data){
        for (var i = 0; i < data.data.length; i++) {

          var marker = new google.maps.Marker({
            position: data.data[i].coordinates,
            map: map,
            title: 'Hello World!'
          });
        }
      })

      
      }
    </script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCtbTBgDnd4FKa6iOlY8FDO3u1R94sItZc&callback=initMap"
    async defer></script>
  </body>
</html>
{% endblock %}

